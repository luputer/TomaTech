{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0},"end":{"line":179,"column":29}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0},"end":{"line":179,"column":29}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0},"end":{"line":179,"column":29}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"./NativeBlobModule","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":13,"column":0},"end":{"line":13,"column":50}}],"key":"8yhexf66+KMPl6M2NPjj2sFxaVw="}},{"name":"invariant","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":14,"column":0},"end":{"line":14,"column":34}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}},{"name":"./Blob","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":16,"column":13},"end":{"line":16,"column":30}}],"key":"EbjXBySE25qcfnrYju25x5GaG3k="}},{"name":"./BlobRegistry","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":17,"column":21},"end":{"line":17,"column":46}}],"key":"J79JGfKe/FiysxfBPf87zeBV7Ns="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _NativeBlobModule = _interopRequireDefault(require(_dependencyMap[3], \"./NativeBlobModule\"));\n  var _invariant = _interopRequireDefault(require(_dependencyMap[4], \"invariant\"));\n  var Blob = require(_dependencyMap[5], \"./Blob\");\n  var BlobRegistry = require(_dependencyMap[6], \"./BlobRegistry\");\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n      var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n  var BlobManager = /*#__PURE__*/function () {\n    function BlobManager() {\n      (0, _classCallCheck2.default)(this, BlobManager);\n    }\n    return (0, _createClass2.default)(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        var blobId = uuidv4();\n        var items = parts.map(part => {\n          if (part instanceof ArrayBuffer || ArrayBuffer.isView(part)) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n          if (part instanceof Blob) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce((acc, curr) => {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n        _NativeBlobModule.default.createFromParts(items, blobId);\n        return BlobManager.createFromOptions({\n          blobId,\n          offset: 0,\n          size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        BlobRegistry.register(options.blobId);\n        return Object.assign(Object.create(Blob.prototype), {\n          data: options.__collector == null ? {\n            ...options,\n            __collector: createBlobCollector(options.blobId)\n          } : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        BlobRegistry.unregister(blobId);\n        if (BlobRegistry.has(blobId)) {\n          return;\n        }\n        _NativeBlobModule.default.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n  }();\n  BlobManager.isAvailable = !!_NativeBlobModule.default;\n  module.exports = BlobManager;\n});","lineCount":113,"map":[[5,2,13,0],[5,6,13,0,"_NativeBlobModule"],[5,23,13,0],[5,26,13,0,"_interopRequireDefault"],[5,48,13,0],[5,49,13,0,"require"],[5,56,13,0],[5,57,13,0,"_dependencyMap"],[5,71,13,0],[6,2,14,0],[6,6,14,0,"_invariant"],[6,16,14,0],[6,19,14,0,"_interopRequireDefault"],[6,41,14,0],[6,42,14,0,"require"],[6,49,14,0],[6,50,14,0,"_dependencyMap"],[6,64,14,0],[7,2,16,0],[7,6,16,6,"Blob"],[7,10,16,10],[7,13,16,13,"require"],[7,20,16,20],[7,21,16,20,"_dependencyMap"],[7,35,16,20],[7,48,16,29],[7,49,16,30],[8,2,17,0],[8,6,17,6,"BlobRegistry"],[8,18,17,18],[8,21,17,21,"require"],[8,28,17,28],[8,29,17,28,"_dependencyMap"],[8,43,17,28],[8,64,17,45],[8,65,17,46],[9,2,26,0],[9,11,26,9,"uuidv4"],[9,17,26,15,"uuidv4"],[9,18,26,15],[9,20,26,26],[10,4,27,2],[10,11,27,9],[10,49,27,47],[10,50,27,48,"replace"],[10,57,27,55],[10,58,27,56],[10,65,27,63],[10,67,27,65,"c"],[10,68,27,66],[10,72,27,70],[11,6,28,4],[11,10,28,10,"r"],[11,11,28,11],[11,14,28,15,"Math"],[11,18,28,19],[11,19,28,20,"random"],[11,25,28,26],[11,26,28,27],[11,27,28,28],[11,30,28,31],[11,32,28,33],[11,35,28,37],[11,36,28,38],[12,8,29,6,"v"],[12,9,29,7],[12,12,29,10,"c"],[12,13,29,11],[12,17,29,15],[12,20,29,18],[12,23,29,21,"r"],[12,24,29,22],[12,27,29,26,"r"],[12,28,29,27],[12,31,29,30],[12,34,29,33],[12,37,29,37],[12,40,29,40],[13,6,30,4],[13,13,30,11,"v"],[13,14,30,12],[13,15,30,13,"toString"],[13,23,30,21],[13,24,30,22],[13,26,30,24],[13,27,30,25],[14,4,31,2],[14,5,31,3],[14,6,31,4],[15,2,32,0],[16,2,41,0],[16,11,41,9,"createBlobCollector"],[16,30,41,28,"createBlobCollector"],[16,31,41,29,"blobId"],[16,37,41,43],[16,39,41,67],[17,4,42,2],[17,8,42,6,"global"],[17,14,42,12],[17,15,42,13,"__blobCollectorProvider"],[17,38,42,36],[17,42,42,40],[17,46,42,44],[17,48,42,46],[18,6,43,4],[18,13,43,11],[18,17,43,15],[19,4,44,2],[19,5,44,3],[19,11,44,9],[20,6,45,4],[20,13,45,11,"global"],[20,19,45,17],[20,20,45,18,"__blobCollectorProvider"],[20,43,45,41],[20,44,45,42,"blobId"],[20,50,45,48],[20,51,45,49],[21,4,46,2],[22,2,47,0],[23,2,47,1],[23,6,52,6,"BlobManager"],[23,17,52,17],[24,4,52,17],[24,13,52,17,"BlobManager"],[24,25,52,17],[25,6,52,17],[25,10,52,17,"_classCallCheck2"],[25,26,52,17],[25,27,52,17,"default"],[25,34,52,17],[25,42,52,17,"BlobManager"],[25,53,52,17],[26,4,52,17],[27,4,52,17],[27,15,52,17,"_createClass2"],[27,28,52,17],[27,29,52,17,"default"],[27,36,52,17],[27,38,52,17,"BlobManager"],[27,49,52,17],[28,6,52,17,"key"],[28,9,52,17],[29,6,52,17,"value"],[29,11,52,17],[29,13,61,2],[29,22,61,9,"createFromParts"],[29,37,61,24,"createFromParts"],[29,38,62,4,"parts"],[29,43,62,31],[29,45,63,4,"options"],[29,52,63,25],[29,54,64,10],[30,8,65,4],[30,12,65,4,"invariant"],[30,30,65,13],[30,32,65,14,"NativeBlobModule"],[30,57,65,30],[30,59,65,32],[30,91,65,64],[30,92,65,65],[31,8,67,4],[31,12,67,10,"blobId"],[31,18,67,16],[31,21,67,19,"uuidv4"],[31,27,67,25],[31,28,67,26],[31,29,67,27],[32,8,68,4],[32,12,68,10,"items"],[32,17,68,15],[32,20,68,18,"parts"],[32,25,68,23],[32,26,68,24,"map"],[32,29,68,27],[32,30,68,28,"part"],[32,34,68,32],[32,38,68,36],[33,10,69,6],[33,14,69,10,"part"],[33,18,69,14],[33,30,69,26,"ArrayBuffer"],[33,41,69,37],[33,45,69,41,"ArrayBuffer"],[33,56,69,52],[33,57,69,53,"isView"],[33,63,69,59],[33,64,69,60,"part"],[33,68,69,64],[33,69,69,65],[33,71,69,67],[34,12,70,8],[34,18,70,14],[34,22,70,18,"Error"],[34,27,70,23],[34,28,71,10],[34,103,72,8],[34,104,72,9],[35,10,73,6],[36,10,74,6],[36,14,74,10,"part"],[36,18,74,14],[36,30,74,26,"Blob"],[36,34,74,30],[36,36,74,32],[37,12,75,8],[37,19,75,15],[38,14,76,10,"data"],[38,18,76,14],[38,20,76,16,"part"],[38,24,76,20],[38,25,76,21,"data"],[38,29,76,25],[39,14,77,10,"type"],[39,18,77,14],[39,20,77,16],[40,12,78,8],[40,13,78,9],[41,10,79,6],[41,11,79,7],[41,17,79,13],[42,12,80,8],[42,19,80,15],[43,14,81,10,"data"],[43,18,81,14],[43,20,81,16,"String"],[43,26,81,22],[43,27,81,23,"part"],[43,31,81,27],[43,32,81,28],[44,14,82,10,"type"],[44,18,82,14],[44,20,82,16],[45,12,83,8],[45,13,83,9],[46,10,84,6],[47,8,85,4],[47,9,85,5],[47,10,85,6],[48,8,86,4],[48,12,86,10,"size"],[48,16,86,14],[48,19,86,17,"items"],[48,24,86,22],[48,25,86,23,"reduce"],[48,31,86,29],[48,32,86,30],[48,33,86,31,"acc"],[48,36,86,34],[48,38,86,36,"curr"],[48,42,86,40],[48,47,86,45],[49,10,87,6],[49,14,87,10,"curr"],[49,18,87,14],[49,19,87,15,"type"],[49,23,87,19],[49,28,87,24],[49,36,87,32],[49,38,87,34],[50,12,88,8],[50,19,88,15,"acc"],[50,22,88,18],[50,25,88,21,"global"],[50,31,88,27],[50,32,88,28,"unescape"],[50,40,88,36],[50,41,88,37,"encodeURI"],[50,50,88,46],[50,51,88,47,"curr"],[50,55,88,51],[50,56,88,52,"data"],[50,60,88,56],[50,61,88,57],[50,62,88,58],[50,63,88,59,"length"],[50,69,88,65],[51,10,89,6],[51,11,89,7],[51,17,89,13],[52,12,90,8],[52,19,90,15,"acc"],[52,22,90,18],[52,25,90,21,"curr"],[52,29,90,25],[52,30,90,26,"data"],[52,34,90,30],[52,35,90,31,"size"],[52,39,90,35],[53,10,91,6],[54,8,92,4],[54,9,92,5],[54,11,92,7],[54,12,92,8],[54,13,92,9],[55,8,94,4,"NativeBlobModule"],[55,33,94,20],[55,34,94,21,"createFromParts"],[55,49,94,36],[55,50,94,37,"items"],[55,55,94,42],[55,57,94,44,"blobId"],[55,63,94,50],[55,64,94,51],[56,8,96,4],[56,15,96,11,"BlobManager"],[56,26,96,22],[56,27,96,23,"createFromOptions"],[56,44,96,40],[56,45,96,41],[57,10,97,6,"blobId"],[57,16,97,12],[58,10,98,6,"offset"],[58,16,98,12],[58,18,98,14],[58,19,98,15],[59,10,99,6,"size"],[59,14,99,10],[60,10,100,6,"type"],[60,14,100,10],[60,16,100,12,"options"],[60,23,100,19],[60,26,100,22,"options"],[60,33,100,29],[60,34,100,30,"type"],[60,38,100,34],[60,41,100,37],[60,43,100,39],[61,10,101,6,"lastModified"],[61,22,101,18],[61,24,101,20,"options"],[61,31,101,27],[61,34,101,30,"options"],[61,41,101,37],[61,42,101,38,"lastModified"],[61,54,101,50],[61,57,101,53,"Date"],[61,61,101,57],[61,62,101,58,"now"],[61,65,101,61],[61,66,101,62],[62,8,102,4],[62,9,102,5],[62,10,102,6],[63,6,103,2],[64,4,103,3],[65,6,103,3,"key"],[65,9,103,3],[66,6,103,3,"value"],[66,11,103,3],[66,13,109,2],[66,22,109,9,"createFromOptions"],[66,39,109,26,"createFromOptions"],[66,40,109,27,"options"],[66,47,109,44],[66,49,109,52],[67,8,110,4,"BlobRegistry"],[67,20,110,16],[67,21,110,17,"register"],[67,29,110,25],[67,30,110,26,"options"],[67,37,110,33],[67,38,110,34,"blobId"],[67,44,110,40],[67,45,110,41],[68,8,112,4],[68,15,112,11,"Object"],[68,21,112,17],[68,22,112,18,"assign"],[68,28,112,24],[68,29,112,25,"Object"],[68,35,112,31],[68,36,112,32,"create"],[68,42,112,38],[68,43,112,39,"Blob"],[68,47,112,43],[68,48,112,44,"prototype"],[68,57,112,53],[68,58,112,54],[68,60,112,56],[69,10,113,6,"data"],[69,14,113,10],[69,16,117,8,"options"],[69,23,117,15],[69,24,117,16,"__collector"],[69,35,117,27],[69,39,117,31],[69,43,117,35],[69,46,118,12],[70,12,119,14],[70,15,119,17,"options"],[70,22,119,24],[71,12,120,14,"__collector"],[71,23,120,25],[71,25,120,27,"createBlobCollector"],[71,44,120,46],[71,45,120,47,"options"],[71,52,120,54],[71,53,120,55,"blobId"],[71,59,120,61],[72,10,121,12],[72,11,121,13],[72,14,122,12,"options"],[73,8,123,4],[73,9,123,5],[73,10,123,6],[74,6,124,2],[75,4,124,3],[76,6,124,3,"key"],[76,9,124,3],[77,6,124,3,"value"],[77,11,124,3],[77,13,129,2],[77,22,129,9,"release"],[77,29,129,16,"release"],[77,30,129,17,"blobId"],[77,36,129,31],[77,38,129,39],[78,8,130,4],[78,12,130,4,"invariant"],[78,30,130,13],[78,32,130,14,"NativeBlobModule"],[78,57,130,30],[78,59,130,32],[78,91,130,64],[78,92,130,65],[79,8,132,4,"BlobRegistry"],[79,20,132,16],[79,21,132,17,"unregister"],[79,31,132,27],[79,32,132,28,"blobId"],[79,38,132,34],[79,39,132,35],[80,8,133,4],[80,12,133,8,"BlobRegistry"],[80,24,133,20],[80,25,133,21,"has"],[80,28,133,24],[80,29,133,25,"blobId"],[80,35,133,31],[80,36,133,32],[80,38,133,34],[81,10,134,6],[82,8,135,4],[83,8,136,4,"NativeBlobModule"],[83,33,136,20],[83,34,136,21,"release"],[83,41,136,28],[83,42,136,29,"blobId"],[83,48,136,35],[83,49,136,36],[84,6,137,2],[85,4,137,3],[86,6,137,3,"key"],[86,9,137,3],[87,6,137,3,"value"],[87,11,137,3],[87,13,143,2],[87,22,143,9,"addNetworkingHandler"],[87,42,143,29,"addNetworkingHandler"],[87,43,143,29],[87,45,143,38],[88,8,144,4],[88,12,144,4,"invariant"],[88,30,144,13],[88,32,144,14,"NativeBlobModule"],[88,57,144,30],[88,59,144,32],[88,91,144,64],[88,92,144,65],[89,8,146,4,"NativeBlobModule"],[89,33,146,20],[89,34,146,21,"addNetworkingHandler"],[89,54,146,41],[89,55,146,42],[89,56,146,43],[90,6,147,2],[91,4,147,3],[92,6,147,3,"key"],[92,9,147,3],[93,6,147,3,"value"],[93,11,147,3],[93,13,153,2],[93,22,153,9,"addWebSocketHandler"],[93,41,153,28,"addWebSocketHandler"],[93,42,153,29,"socketId"],[93,50,153,45],[93,52,153,53],[94,8,154,4],[94,12,154,4,"invariant"],[94,30,154,13],[94,32,154,14,"NativeBlobModule"],[94,57,154,30],[94,59,154,32],[94,91,154,64],[94,92,154,65],[95,8,156,4,"NativeBlobModule"],[95,33,156,20],[95,34,156,21,"addWebSocketHandler"],[95,53,156,40],[95,54,156,41,"socketId"],[95,62,156,49],[95,63,156,50],[96,6,157,2],[97,4,157,3],[98,6,157,3,"key"],[98,9,157,3],[99,6,157,3,"value"],[99,11,157,3],[99,13,163,2],[99,22,163,9,"removeWebSocketHandler"],[99,44,163,31,"removeWebSocketHandler"],[99,45,163,32,"socketId"],[99,53,163,48],[99,55,163,56],[100,8,164,4],[100,12,164,4,"invariant"],[100,30,164,13],[100,32,164,14,"NativeBlobModule"],[100,57,164,30],[100,59,164,32],[100,91,164,64],[100,92,164,65],[101,8,166,4,"NativeBlobModule"],[101,33,166,20],[101,34,166,21,"removeWebSocketHandler"],[101,56,166,43],[101,57,166,44,"socketId"],[101,65,166,52],[101,66,166,53],[102,6,167,2],[103,4,167,3],[104,6,167,3,"key"],[104,9,167,3],[105,6,167,3,"value"],[105,11,167,3],[105,13,172,2],[105,22,172,9,"sendOverSocket"],[105,36,172,23,"sendOverSocket"],[105,37,172,24,"blob"],[105,41,172,34],[105,43,172,36,"socketId"],[105,51,172,52],[105,53,172,60],[106,8,173,4],[106,12,173,4,"invariant"],[106,30,173,13],[106,32,173,14,"NativeBlobModule"],[106,57,173,30],[106,59,173,32],[106,91,173,64],[106,92,173,65],[107,8,175,4,"NativeBlobModule"],[107,33,175,20],[107,34,175,21,"sendOverSocket"],[107,48,175,35],[107,49,175,36,"blob"],[107,53,175,40],[107,54,175,41,"data"],[107,58,175,45],[107,60,175,47,"socketId"],[107,68,175,55],[107,69,175,56],[108,6,176,2],[109,4,176,3],[110,2,176,3],[111,2,52,6,"BlobManager"],[111,13,52,17],[111,14,56,9,"isAvailable"],[111,25,56,20],[111,28,56,32],[111,29,56,33],[111,30,56,34,"NativeBlobModule"],[111,55,56,50],[112,2,179,0,"module"],[112,8,179,6],[112,9,179,7,"exports"],[112,16,179,14],[112,19,179,17,"BlobManager"],[112,30,179,28],[113,0,179,29],[113,3]],"functionMap":{"names":["<global>","uuidv4","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","createBlobCollector","BlobManager","createFromParts","parts.map$argument_0","items.reduce$argument_0","createFromOptions","release","addNetworkingHandler","addWebSocketHandler","removeWebSocketHandler","sendOverSocket"],"mappings":"AAA;ACyB;iECC;GDI;CDC;AGS;CHM;AIK;ECS;4BCO;KDiB;8BEC;KFM;GDW;EIM;GJe;EKK;GLQ;EMM;GNI;EOM;GPI;EQM;GRI;ESK;GTI;CJC"}},"type":"js/module"}]}