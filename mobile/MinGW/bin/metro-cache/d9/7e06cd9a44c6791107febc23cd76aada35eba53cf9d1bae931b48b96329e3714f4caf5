{"dependencies":[{"name":"react","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":73,"index":120}}],"key":"wXMcIJWUD66R6uBdlKglbjBdJPs="}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":5,"column":0,"index":121},"end":{"line":5,"column":69,"index":190}}],"key":"jk0qVIUl5f0mZv0RFSM44Eb40Bo="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shouldPreventRemove = void 0;\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var React = _interopRequireWildcard(require(_dependencyMap[0], \"react\"));\n  var _NavigationBuilderContext = require(_dependencyMap[1], \"./NavigationBuilderContext.js\");\n  var _NavigationRouteContext = require(_dependencyMap[2], \"./NavigationRouteContext.js\");\n  function _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\n  function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = (emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) => {\n    var nextRouteKeys = nextRoutes.map(route => route.key);\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(route => !nextRouteKeys.includes(route.key)).reverse();\n    var visitedRouteKeys =\n    // @ts-expect-error: add this property to mark that we've already emitted this action\n    action[VISITED_ROUTE_KEYS] ?? new Set();\n    var beforeRemoveAction = {\n      ...action,\n      [VISITED_ROUTE_KEYS]: visitedRouteKeys\n    };\n    for (var route of removedRoutes) {\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = beforeRemoveListeners[route.key]?.(beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  exports.shouldPreventRemove = shouldPreventRemove;\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContext.NavigationRouteContext);\n    var routeKey = route?.key;\n    React.useEffect(() => {\n      if (routeKey) {\n        return addKeyedListener?.('beforeRemove', routeKey, action => {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":71,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"shouldPreventRemove"],[7,29,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"useOnPreventRemove"],[8,28,1,13],[8,31,1,13,"useOnPreventRemove"],[8,49,1,13],[9,2,3,0],[9,6,3,0,"React"],[9,11,3,0],[9,14,3,0,"_interopRequireWildcard"],[9,37,3,0],[9,38,3,0,"require"],[9,45,3,0],[9,46,3,0,"_dependencyMap"],[9,60,3,0],[10,2,4,0],[10,6,4,0,"_NavigationBuilderContext"],[10,31,4,0],[10,34,4,0,"require"],[10,41,4,0],[10,42,4,0,"_dependencyMap"],[10,56,4,0],[11,2,5,0],[11,6,5,0,"_NavigationRouteContext"],[11,29,5,0],[11,32,5,0,"require"],[11,39,5,0],[11,40,5,0,"_dependencyMap"],[11,54,5,0],[12,2,5,69],[12,11,5,69,"_getRequireWildcardCache"],[12,36,5,69,"e"],[12,37,5,69],[12,66,5,69,"WeakMap"],[12,73,5,69],[12,92,5,69,"r"],[12,93,5,69],[12,100,5,69,"WeakMap"],[12,107,5,69],[12,111,5,69,"t"],[12,112,5,69],[12,119,5,69,"WeakMap"],[12,126,5,69],[12,138,5,69,"_getRequireWildcardCache"],[12,162,5,69],[12,174,5,69,"_getRequireWildcardCache"],[12,175,5,69,"e"],[12,176,5,69],[12,187,5,69,"e"],[12,188,5,69],[12,191,5,69,"t"],[12,192,5,69],[12,195,5,69,"r"],[12,196,5,69],[12,201,5,69,"e"],[12,202,5,69],[13,2,5,69],[13,11,5,69,"_interopRequireWildcard"],[13,35,5,69,"e"],[13,36,5,69],[13,38,5,69,"r"],[13,39,5,69],[13,48,5,69,"r"],[13,49,5,69],[13,53,5,69,"e"],[13,54,5,69],[13,58,5,69,"e"],[13,59,5,69],[13,60,5,69,"__esModule"],[13,70,5,69],[13,79,5,69,"e"],[13,80,5,69],[13,95,5,69,"e"],[13,96,5,69],[13,119,5,69,"e"],[13,120,5,69],[13,145,5,69,"e"],[13,146,5,69],[13,157,5,69,"default"],[13,164,5,69],[13,166,5,69,"e"],[13,167,5,69],[13,175,5,69,"t"],[13,176,5,69],[13,179,5,69,"_getRequireWildcardCache"],[13,203,5,69],[13,204,5,69,"r"],[13,205,5,69],[13,212,5,69,"t"],[13,213,5,69],[13,217,5,69,"t"],[13,218,5,69],[13,219,5,69,"has"],[13,222,5,69],[13,223,5,69,"e"],[13,224,5,69],[13,234,5,69,"t"],[13,235,5,69],[13,236,5,69,"get"],[13,239,5,69],[13,240,5,69,"e"],[13,241,5,69],[13,248,5,69,"n"],[13,249,5,69],[13,254,5,69,"__proto__"],[13,263,5,69],[13,273,5,69,"a"],[13,274,5,69],[13,277,5,69,"Object"],[13,283,5,69],[13,284,5,69,"defineProperty"],[13,298,5,69],[13,302,5,69,"Object"],[13,308,5,69],[13,309,5,69,"getOwnPropertyDescriptor"],[13,333,5,69],[13,344,5,69,"u"],[13,345,5,69],[13,349,5,69,"e"],[13,350,5,69],[13,370,5,69,"u"],[13,371,5,69],[13,378,5,69,"hasOwnProperty"],[13,392,5,69],[13,393,5,69,"call"],[13,397,5,69],[13,398,5,69,"e"],[13,399,5,69],[13,401,5,69,"u"],[13,402,5,69],[13,411,5,69,"i"],[13,412,5,69],[13,415,5,69,"a"],[13,416,5,69],[13,419,5,69,"Object"],[13,425,5,69],[13,426,5,69,"getOwnPropertyDescriptor"],[13,450,5,69],[13,451,5,69,"e"],[13,452,5,69],[13,454,5,69,"u"],[13,455,5,69],[13,465,5,69,"i"],[13,466,5,69],[13,471,5,69,"i"],[13,472,5,69],[13,473,5,69,"get"],[13,476,5,69],[13,480,5,69,"i"],[13,481,5,69],[13,482,5,69,"set"],[13,485,5,69],[13,489,5,69,"Object"],[13,495,5,69],[13,496,5,69,"defineProperty"],[13,510,5,69],[13,511,5,69,"n"],[13,512,5,69],[13,514,5,69,"u"],[13,515,5,69],[13,517,5,69,"i"],[13,518,5,69],[13,522,5,69,"n"],[13,523,5,69],[13,524,5,69,"u"],[13,525,5,69],[13,529,5,69,"e"],[13,530,5,69],[13,531,5,69,"u"],[13,532,5,69],[13,544,5,69,"n"],[13,545,5,69],[13,546,5,69,"default"],[13,553,5,69],[13,556,5,69,"e"],[13,557,5,69],[13,559,5,69,"t"],[13,560,5,69],[13,564,5,69,"t"],[13,565,5,69],[13,566,5,69,"set"],[13,569,5,69],[13,570,5,69,"e"],[13,571,5,69],[13,573,5,69,"n"],[13,574,5,69],[13,577,5,69,"n"],[13,578,5,69],[14,2,6,0],[14,6,6,6,"VISITED_ROUTE_KEYS"],[14,24,6,24],[14,27,6,27,"Symbol"],[14,33,6,33],[14,34,6,34],[14,54,6,54],[14,55,6,55],[15,2,7,7],[15,6,7,13,"shouldPreventRemove"],[15,25,7,32],[15,28,7,35,"shouldPreventRemove"],[15,29,7,36,"emitter"],[15,36,7,43],[15,38,7,45,"beforeRemoveListeners"],[15,59,7,66],[15,61,7,68,"currentRoutes"],[15,74,7,81],[15,76,7,83,"nextRoutes"],[15,86,7,93],[15,88,7,95,"action"],[15,94,7,101],[15,99,7,106],[16,4,8,2],[16,8,8,8,"nextRouteKeys"],[16,21,8,21],[16,24,8,24,"nextRoutes"],[16,34,8,34],[16,35,8,35,"map"],[16,38,8,38],[16,39,8,39,"route"],[16,44,8,44],[16,48,8,48,"route"],[16,53,8,53],[16,54,8,54,"key"],[16,57,8,57],[16,58,8,58],[18,4,10,2],[19,4,11,2],[19,8,11,8,"removedRoutes"],[19,21,11,21],[19,24,11,24,"currentRoutes"],[19,37,11,37],[19,38,11,38,"filter"],[19,44,11,44],[19,45,11,45,"route"],[19,50,11,50],[19,54,11,54],[19,55,11,55,"nextRouteKeys"],[19,68,11,68],[19,69,11,69,"includes"],[19,77,11,77],[19,78,11,78,"route"],[19,83,11,83],[19,84,11,84,"key"],[19,87,11,87],[19,88,11,88],[19,89,11,89],[19,90,11,90,"reverse"],[19,97,11,97],[19,98,11,98],[19,99,11,99],[20,4,12,2],[20,8,12,8,"visitedRouteKeys"],[20,24,12,24],[21,4,13,2],[22,4,14,2,"action"],[22,10,14,8],[22,11,14,9,"VISITED_ROUTE_KEYS"],[22,29,14,27],[22,30,14,28],[22,34,14,32],[22,38,14,36,"Set"],[22,41,14,39],[22,42,14,40],[22,43,14,41],[23,4,15,2],[23,8,15,8,"beforeRemoveAction"],[23,26,15,26],[23,29,15,29],[24,6,16,4],[24,9,16,7,"action"],[24,15,16,13],[25,6,17,4],[25,7,17,5,"VISITED_ROUTE_KEYS"],[25,25,17,23],[25,28,17,26,"visitedRouteKeys"],[26,4,18,2],[26,5,18,3],[27,4,19,2],[27,9,19,7],[27,13,19,13,"route"],[27,18,19,18],[27,22,19,22,"removedRoutes"],[27,35,19,35],[27,37,19,37],[28,6,20,4],[28,10,20,8,"visitedRouteKeys"],[28,26,20,24],[28,27,20,25,"has"],[28,30,20,28],[28,31,20,29,"route"],[28,36,20,34],[28,37,20,35,"key"],[28,40,20,38],[28,41,20,39],[28,43,20,41],[29,8,21,6],[30,8,22,6],[31,6,23,4],[33,6,25,4],[34,6,26,4],[34,10,26,10,"isPrevented"],[34,21,26,21],[34,24,26,24,"beforeRemoveListeners"],[34,45,26,45],[34,46,26,46,"route"],[34,51,26,51],[34,52,26,52,"key"],[34,55,26,55],[34,56,26,56],[34,59,26,59,"beforeRemoveAction"],[34,77,26,77],[34,78,26,78],[35,6,27,4],[35,10,27,8,"isPrevented"],[35,21,27,19],[35,23,27,21],[36,8,28,6],[36,15,28,13],[36,19,28,17],[37,6,29,4],[38,6,30,4,"visitedRouteKeys"],[38,22,30,20],[38,23,30,21,"add"],[38,26,30,24],[38,27,30,25,"route"],[38,32,30,30],[38,33,30,31,"key"],[38,36,30,34],[38,37,30,35],[39,6,31,4],[39,10,31,10,"event"],[39,15,31,15],[39,18,31,18,"emitter"],[39,25,31,25],[39,26,31,26,"emit"],[39,30,31,30],[39,31,31,31],[40,8,32,6,"type"],[40,12,32,10],[40,14,32,12],[40,28,32,26],[41,8,33,6,"target"],[41,14,33,12],[41,16,33,14,"route"],[41,21,33,19],[41,22,33,20,"key"],[41,25,33,23],[42,8,34,6,"data"],[42,12,34,10],[42,14,34,12],[43,10,35,8,"action"],[43,16,35,14],[43,18,35,16,"beforeRemoveAction"],[44,8,36,6],[44,9,36,7],[45,8,37,6,"canPreventDefault"],[45,25,37,23],[45,27,37,25],[46,6,38,4],[46,7,38,5],[46,8,38,6],[47,6,39,4],[47,10,39,8,"event"],[47,15,39,13],[47,16,39,14,"defaultPrevented"],[47,32,39,30],[47,34,39,32],[48,8,40,6],[48,15,40,13],[48,19,40,17],[49,6,41,4],[50,4,42,2],[51,4,43,2],[51,11,43,9],[51,16,43,14],[52,2,44,0],[52,3,44,1],[53,2,44,2,"exports"],[53,9,44,2],[53,10,44,2,"shouldPreventRemove"],[53,29,44,2],[53,32,44,2,"shouldPreventRemove"],[53,51,44,2],[54,2,45,7],[54,11,45,16,"useOnPreventRemove"],[54,29,45,34,"useOnPreventRemove"],[54,30,45,34,"_ref"],[54,34,45,34],[54,36,49,3],[55,4,49,3],[55,8,46,2,"getState"],[55,16,46,10],[55,19,46,10,"_ref"],[55,23,46,10],[55,24,46,2,"getState"],[55,32,46,10],[56,6,47,2,"emitter"],[56,13,47,9],[56,16,47,9,"_ref"],[56,20,47,9],[56,21,47,2,"emitter"],[56,28,47,9],[57,6,48,2,"beforeRemoveListeners"],[57,27,48,23],[57,30,48,23,"_ref"],[57,34,48,23],[57,35,48,2,"beforeRemoveListeners"],[57,56,48,23],[58,4,50,2],[58,8,50,2,"_React$useContext"],[58,25,50,2],[58,28,52,6,"React"],[58,33,52,11],[58,34,52,12,"useContext"],[58,44,52,22],[58,45,52,23,"NavigationBuilderContext"],[58,95,52,47],[58,96,52,48],[59,6,51,4,"addKeyedListener"],[59,22,51,20],[59,25,51,20,"_React$useContext"],[59,42,51,20],[59,43,51,4,"addKeyedListener"],[59,59,51,20],[60,4,53,2],[60,8,53,8,"route"],[60,13,53,13],[60,16,53,16,"React"],[60,21,53,21],[60,22,53,22,"useContext"],[60,32,53,32],[60,33,53,33,"NavigationRouteContext"],[60,79,53,55],[60,80,53,56],[61,4,54,2],[61,8,54,8,"routeKey"],[61,16,54,16],[61,19,54,19,"route"],[61,24,54,24],[61,26,54,26,"key"],[61,29,54,29],[62,4,55,2,"React"],[62,9,55,7],[62,10,55,8,"useEffect"],[62,19,55,17],[62,20,55,18],[62,26,55,24],[63,6,56,4],[63,10,56,8,"routeKey"],[63,18,56,16],[63,20,56,18],[64,8,57,6],[64,15,57,13,"addKeyedListener"],[64,31,57,29],[64,34,57,32],[64,48,57,46],[64,50,57,48,"routeKey"],[64,58,57,56],[64,60,57,58,"action"],[64,66,57,64],[64,70,57,68],[65,10,58,8],[65,14,58,14,"state"],[65,19,58,19],[65,22,58,22,"getState"],[65,30,58,30],[65,31,58,31],[65,32,58,32],[66,10,59,8],[66,17,59,15,"shouldPreventRemove"],[66,36,59,34],[66,37,59,35,"emitter"],[66,44,59,42],[66,46,59,44,"beforeRemoveListeners"],[66,67,59,65],[66,69,59,67,"state"],[66,74,59,72],[66,75,59,73,"routes"],[66,81,59,79],[66,83,59,81],[66,85,59,83],[66,87,59,85,"action"],[66,93,59,91],[66,94,59,92],[67,8,60,6],[67,9,60,7],[67,10,60,8],[68,6,61,4],[69,4,62,2],[69,5,62,3],[69,7,62,5],[69,8,62,6,"addKeyedListener"],[69,24,62,22],[69,26,62,24,"beforeRemoveListeners"],[69,47,62,45],[69,49,62,47,"emitter"],[69,56,62,54],[69,58,62,56,"getState"],[69,66,62,64],[69,68,62,66,"routeKey"],[69,76,62,74],[69,77,62,75],[69,78,62,76],[70,2,63,0],[71,0,63,1],[71,3]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCM;uCCC,kBD;6CEG,2CF;CDiC;OIC;kBCU;0DCE;ODG;GDE;CJC"}},"type":"js/module"}]}